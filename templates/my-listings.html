{% extends "base.html" %}

{% block title %}EtherCS | My Listings{% endblock %}

{% block content %}

{% if listings %}
    {% for listing in listings %}
        <img src="{{ listing.icon_url }}" alt="{{ listing.market_name }}" width="120" height="90">
        
        <p>{{ listing.market_name }}  |  ${{ listing.price }}</p>

        <form action="{{ url_for('my_listings_edit') }}" method="post">
            <input type="hidden" name="listing_id" value="{{ listing.id }}">
            <input type="hidden" name="seller_id" value="{{ listing.seller_id }}">
            <input type="number" name="new_price" step="0.01" min="0" max="99999999.99" required>
            <button type="submit">Edit Price</button>
        </form>

        <form action="{{ url_for('my_listings_delete') }}" method="post">
            <input type="hidden" name="listing_id" value="{{ listing.id }}">
            <input type="hidden" name="seller_id" value="{{ listing.seller_id }}">
            <button type="submit">Delete Listing</button>
        </form>
    {% endfor %}
{% else %}
    <p>You have no active listings.</p>
{% endif %}

{% endblock %}